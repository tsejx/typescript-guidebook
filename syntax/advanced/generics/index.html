<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no"
    />
    <link rel="shortcut icon" type="image/x-icon" href="./favicon.ico" />
    <link rel="stylesheet" href="/typescript-guidebook/umi.css" />
    <script>
      window.routerBase = "/typescript-guidebook/";
    </script>
    <script>
      //! umi version: 3.2.16
    </script>
    <title>泛型</title>
  
</head>
  <body>
    <div id="root"><div class="__dumi-default-layout" data-show-sidemenu="true" data-show-slugs="true" data-site-mode="true" data-gapless="false"><div class="__dumi-default-navbar" data-mode="site"><button class="__dumi-default-navbar-toggle"></button><a class="__dumi-default-navbar-logo" style="background-image:url(&#x27;http://img.mrsingsing.com/typescript-guidebook-logo.svg&#x27;)" href="/typescript-guidebook//">TypeScript Guidebook</a><nav><div class="__dumi-default-search"><input type="search" class="__dumi-default-search-input" value=""/><ul></ul></div><a aria-current="page" class="active" href="/typescript-guidebook//syntax">语法</a><a href="/typescript-guidebook//config">配置</a><a href="/typescript-guidebook//compiler">编译原理</a><a href="/typescript-guidebook//wiki">扩展</a><a target="_blank" rel="noopener noreferrer" href="https://github.com/tsejx/typescript-guidebook">Github<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div><div class="__dumi-default-menu" data-mode="site"><div class="__dumi-default-menu-inner"><div class="__dumi-default-menu-header"><a class="__dumi-default-menu-logo" style="background-image:url(&#x27;http://img.mrsingsing.com/typescript-guidebook-logo.svg&#x27;)" href="/typescript-guidebook//"></a><h1>TypeScript Guidebook</h1><p>TypeScript 完全知识体系</p></div><div class="__dumi-default-menu-mobile-area"><ul class="__dumi-default-menu-nav-list"><li><a aria-current="page" class="active" href="/typescript-guidebook//syntax">语法</a></li><li><a href="/typescript-guidebook//config">配置</a></li><li><a href="/typescript-guidebook//compiler">编译原理</a></li><li><a href="/typescript-guidebook//wiki">扩展</a></li><li><a target="_blank" rel="noopener noreferrer" href="https://github.com/tsejx/typescript-guidebook">Github<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div><ul class="__dumi-default-menu-list"><li><a href="/typescript-guidebook//syntax/basics">基础</a><ul><li><a href="/typescript-guidebook//syntax/basics/basic-types"><span>原始数据类型</span></a></li><li><a href="/typescript-guidebook//syntax/basics/tuple"><span>元组类型</span></a></li><li><a href="/typescript-guidebook//syntax/basics/enums"><span>枚举类型</span></a></li><li><a href="/typescript-guidebook//syntax/basics/any"><span>任意类型</span></a></li><li><a href="/typescript-guidebook//syntax/basics/type-of-never"><span>never 类型</span></a></li><li><a href="/typescript-guidebook//syntax/basics/type-of-array"><span>数组的类型</span></a></li><li><a href="/typescript-guidebook//syntax/basics/type-of-function"><span>函数的类型</span></a></li><li><a href="/typescript-guidebook//syntax/basics/interfaces"><span>对象的类型 / 接口</span></a></li><li><a href="/typescript-guidebook//syntax/basics/classes"><span>类</span></a></li><li><a href="/typescript-guidebook//syntax/basics/type-aliases"><span>类型别名</span></a></li><li><a href="/typescript-guidebook//syntax/basics/declaration-merging"><span>声明合并</span></a></li></ul></li><li><a aria-current="page" class="active" href="/typescript-guidebook//syntax/advanced">进阶</a><ul><li><a aria-current="page" class="active" href="/typescript-guidebook//syntax/advanced/generics"><span>泛型</span></a></li><li><a href="/typescript-guidebook//syntax/advanced/type-assertion"><span>类型断言</span></a></li><li><a href="/typescript-guidebook//syntax/advanced/type-inference"><span>类型推论</span></a></li><li><a href="/typescript-guidebook//syntax/advanced/type-guards"><span>类型保护</span></a></li><li><a href="/typescript-guidebook//syntax/advanced/type-compatibility"><span>类型兼容性</span></a></li><li><a href="/typescript-guidebook//syntax/advanced/intersection-types"><span>交叉类型</span></a></li><li><a href="/typescript-guidebook//syntax/advanced/union-types"><span>联合类型</span></a></li><li><a href="/typescript-guidebook//syntax/advanced/index-types"><span>索引类型</span></a></li><li><a href="/typescript-guidebook//syntax/advanced/mapped-types"><span>映射类型</span></a></li><li><a href="/typescript-guidebook//syntax/advanced/conditional-types"><span>条件类型</span></a></li><li><a href="/typescript-guidebook//syntax/advanced/this-types"><span>This类型</span></a></li><li><a href="/typescript-guidebook//syntax/advanced/string-literal-types"><span>字符串字面量类型</span></a></li><li><a href="/typescript-guidebook//syntax/advanced/discriminated-unions"><span>可辨识联合</span></a></li><li><a href="/typescript-guidebook//syntax/advanced/namespaces-and-modules"><span>命名空间和模块</span></a></li><li><a href="/typescript-guidebook//syntax/advanced/utility-types"><span>实用工具类型</span></a></li></ul></li><li><a href="/typescript-guidebook//syntax/senior">高级</a><ul><li><a href="/typescript-guidebook//syntax/senior/modules-resolution"><span>模块解析</span></a></li><li><a href="/typescript-guidebook//syntax/senior/decorators"><span>装饰器</span></a></li><li><a href="/typescript-guidebook//syntax/senior/mixins"><span>混入</span></a></li><li><a href="/typescript-guidebook//syntax/senior/triple-slash-directives"><span>三斜线指令</span></a></li><li><a href="/typescript-guidebook//syntax/senior/error"><span>常见报错</span></a></li></ul></li></ul></div></div><ul class="__dumi-default-layout-toc" role="slug-list"><li title="基础用法" data-depth="2" class=""><a href="/typescript-guidebook//syntax/advanced/generics#基础用法"><span>基础用法</span></a></li><li title="多个类型参数" data-depth="2" class=""><a href="/typescript-guidebook//syntax/advanced/generics#多个类型参数"><span>多个类型参数</span></a></li><li title="泛型约束" data-depth="2" class=""><a href="/typescript-guidebook//syntax/advanced/generics#泛型约束"><span>泛型约束</span></a></li><li title="泛型接口" data-depth="2" class=""><a href="/typescript-guidebook//syntax/advanced/generics#泛型接口"><span>泛型接口</span></a></li><li title="泛型类" data-depth="2" class=""><a href="/typescript-guidebook//syntax/advanced/generics#泛型类"><span>泛型类</span></a></li><li title="泛型参数的默认类型" data-depth="2" class=""><a href="/typescript-guidebook//syntax/advanced/generics#泛型参数的默认类型"><span>泛型参数的默认类型</span></a></li></ul><div class="__dumi-default-layout-content"><div class="markdown"><h1 id="泛型"><a aria-hidden="true" href="#泛型"><span class="icon icon-link"></span></a>泛型</h1><p>泛型（Generics）是指在定义函数、接口或类的时候，不预先指定具体的类型，而在使用的时候再指定类型的一种特性。</p><h2 id="基础用法"><a aria-hidden="true" href="#基础用法"><span class="icon icon-link"></span></a>基础用法</h2><p>首先，我们来实现一个函数 <code>createArray</code>，它可以创建一个指定长度的数组，同时将每一项都填充一个默认值：</p><div class="__dumi-default-code-block"><pre class="prism-code language-ts"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="function createArray(length: number, value: any): Array&lt;any&gt; {
  let result = [];
  for (let i = 0; i &lt; length; i++) {
    result[i] = value;
  }
  return result;
}

createArray(3, &#x27;x&#x27;); // [&#x27;x&#x27;, &#x27;x&#x27;, &#x27;x&#x27;]
" data-status="copy"></button><div class="token-line"><span class="token keyword">function</span><span class="token plain"> </span><span class="token function">createArray</span><span class="token punctuation">(</span><span class="token parameter">length</span><span class="token parameter punctuation">:</span><span class="token parameter"> number</span><span class="token parameter punctuation">,</span><span class="token parameter"> value</span><span class="token parameter punctuation">:</span><span class="token parameter"> any</span><span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token known-class-name class-name">Array</span><span class="token operator">&lt;</span><span class="token builtin">any</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">let</span><span class="token plain"> result </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">for</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token keyword">let</span><span class="token plain"> i </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation">;</span><span class="token plain"> i </span><span class="token operator">&lt;</span><span class="token plain"> length</span><span class="token punctuation">;</span><span class="token plain"> i</span><span class="token operator">++</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    result</span><span class="token punctuation">[</span><span class="token plain">i</span><span class="token punctuation">]</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> value</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">return</span><span class="token plain"> result</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token function">createArray</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">&#x27;x&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"> </span><span class="token comment">// [&#x27;x&#x27;, &#x27;x&#x27;, &#x27;x&#x27;]</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><p>上例中，我们使用了之前提到过的数组泛型来定义返回值的类型。</p><p>这段代码编译不会报错，但是一个显而易见的缺陷是，它并没有准确的定义返回值的类型：</p><p><code>Array&lt;any&gt;</code> 允许数组的每一项都为任意类型。但是我们预期的是，数组中每一项都应该是输入的 <code>value</code> 的类型。</p><p>这时候，泛型就派上用场了：</p><div class="__dumi-default-code-block"><pre class="prism-code language-ts"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="function createArray&lt;T&gt;(length: number, value: T): Array&lt;T&gt; {
  let result: T[] = [];
  for (let i = 0; i &lt; length; i++) {
    result[i] = value;
  }
  return result;
}

createArray&lt;string&gt;(3, &#x27;x&#x27;); // [&#x27;x&#x27;, &#x27;x&#x27;, &#x27;x&#x27;]
" data-status="copy"></button><div class="token-line"><span class="token keyword">function</span><span class="token plain"> createArray</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token plain">length</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token punctuation">,</span><span class="token plain"> value</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token constant">T</span><span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token known-class-name class-name">Array</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">let</span><span class="token plain"> result</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token constant">T</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">for</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token keyword">let</span><span class="token plain"> i </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation">;</span><span class="token plain"> i </span><span class="token operator">&lt;</span><span class="token plain"> length</span><span class="token punctuation">;</span><span class="token plain"> i</span><span class="token operator">++</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    result</span><span class="token punctuation">[</span><span class="token plain">i</span><span class="token punctuation">]</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> value</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">return</span><span class="token plain"> result</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain">createArray</span><span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">&#x27;x&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"> </span><span class="token comment">// [&#x27;x&#x27;, &#x27;x&#x27;, &#x27;x&#x27;]</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><p>上例中，我们在函数名后添加了 <code>&lt;T&gt;</code>，其中 <code>T</code> 用来指代任意输入的类型，在后面的输入 <code>value: T</code> 和输出 <code>Array&lt;T&gt;</code> 中即可使用了。</p><p>接着在调用的时候，可以指定它具体的类型为 <code>string</code>。当然，也可以不手动指定，而让类型推论自动推算出来：</p><div class="__dumi-default-code-block"><pre class="prism-code language-ts"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="function createArray&lt;T&gt;(length: number, value: T): Array&lt;T&gt; {
  let result: T[] = [];
  for (let i = 0; i &lt; length; i++) {
    result[i] = value;
  }
  return result;
}

createArray(3, &#x27;x&#x27;);
// [&#x27;x&#x27;, &#x27;x&#x27;, &#x27;x&#x27;]
" data-status="copy"></button><div class="token-line"><span class="token keyword">function</span><span class="token plain"> createArray</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token plain">length</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token punctuation">,</span><span class="token plain"> value</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token constant">T</span><span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token known-class-name class-name">Array</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">let</span><span class="token plain"> result</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token constant">T</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">for</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token keyword">let</span><span class="token plain"> i </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation">;</span><span class="token plain"> i </span><span class="token operator">&lt;</span><span class="token plain"> length</span><span class="token punctuation">;</span><span class="token plain"> i</span><span class="token operator">++</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    result</span><span class="token punctuation">[</span><span class="token plain">i</span><span class="token punctuation">]</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> value</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">return</span><span class="token plain"> result</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token function">createArray</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">&#x27;x&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment">// [&#x27;x&#x27;, &#x27;x&#x27;, &#x27;x&#x27;]</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h2 id="多个类型参数"><a aria-hidden="true" href="#多个类型参数"><span class="icon icon-link"></span></a>多个类型参数</h2><p>定义泛型的时候，可以一次定义多个类型参数：</p><div class="__dumi-default-code-block"><pre class="prism-code language-ts"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="function swap&lt;T, U&gt;(tuple: [T, U]): [U, T] {
  return [tuple[1], tuple[0]];
}

swap([7, &#x27;seven&#x27;]); // [&#x27;seven&#x27;, 7]
" data-status="copy"></button><div class="token-line"><span class="token keyword">function</span><span class="token plain"> swap</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token constant">U</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token plain">tuple</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token constant">T</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token constant">U</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token constant">U</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token constant">T</span><span class="token punctuation">]</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">return</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token plain">tuple</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token plain"> tuple</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token function">swap</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">&#x27;seven&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"> </span><span class="token comment">// [&#x27;seven&#x27;, 7]</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h2 id="泛型约束"><a aria-hidden="true" href="#泛型约束"><span class="icon icon-link"></span></a>泛型约束</h2><p>在函数内部使用泛型变量的时候，由于事先不知道它是哪种类型，所以不能随意的操作它的属性或方法：</p><div class="__dumi-default-code-block"><pre class="prism-code language-ts"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="function loggingIdentity&lt;T&gt;(arg: T): T {
  console.log(arg.length);
  return arg;
}

// index.ts(2,19): error TS2339: Property &#x27;length&#x27; does not exist on type &#x27;T&#x27;.
" data-status="copy"></button><div class="token-line"><span class="token keyword">function</span><span class="token plain"> loggingIdentity</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token plain">arg</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token constant">T</span><span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token constant">T</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token plain">arg</span><span class="token punctuation">.</span><span class="token property-access">length</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">return</span><span class="token plain"> arg</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment">// index.ts(2,19): error TS2339: Property &#x27;length&#x27; does not exist on type &#x27;T&#x27;.</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><p>上例中，泛型 <code>T</code> 不一定包含属性 <code>length</code>，所以编译的时候报错了。</p><p>这时，我们可以对泛型晋西给你约束，只允许这个函数传入那些包含 <code>length</code> 属性的变量。这就是<strong>泛型约束</strong>：</p><div class="__dumi-default-code-block"><pre class="prism-code language-ts"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="interface Lengthwise {
  length: number;
}

function loggingIdentity&lt;T extends Lengthwise&gt;(arg: T): T {
  console.log(arg.length);
  return arg;
}
" data-status="copy"></button><div class="token-line"><span class="token keyword">interface</span><span class="token plain"> </span><span class="token class-name">Lengthwise</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  length</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">function</span><span class="token plain"> loggingIdentity</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token plain"> </span><span class="token keyword">extends</span><span class="token plain"> </span><span class="token class-name">Lengthwise</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token plain">arg</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token constant">T</span><span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token constant">T</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token plain">arg</span><span class="token punctuation">.</span><span class="token property-access">length</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">return</span><span class="token plain"> arg</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><p>上例中，我们使用了 <code>extends</code> 约束了泛型 <code>T</code> 必须符合接口 <code>Lengthwise</code> 的形状，也就是必须包含 <code>length</code> 属性。</p><p>此时如果调用 <code>loggingIdentity</code> 的时候，传入的 <code>arg</code> 不包含 <code>length</code>，那么在编译阶段就会报错了：</p><div class="__dumi-default-code-block"><pre class="prism-code language-ts"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="interface Lengthwise {
  length: number;
}

function loggingIdentity&lt;T extends Lengthwise&gt;(arg: T): T {
  console.log(arg.length);
  return arg;
}

loggingIdentity(7);

// index.ts(10,17): error TS2345: Argument of type &#x27;7&#x27; is not assignable to parameter of type &#x27;Lengthwise&#x27;.
" data-status="copy"></button><div class="token-line"><span class="token keyword">interface</span><span class="token plain"> </span><span class="token class-name">Lengthwise</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  length</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">function</span><span class="token plain"> loggingIdentity</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token plain"> </span><span class="token keyword">extends</span><span class="token plain"> </span><span class="token class-name">Lengthwise</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token plain">arg</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token constant">T</span><span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token constant">T</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token plain">arg</span><span class="token punctuation">.</span><span class="token property-access">length</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">return</span><span class="token plain"> arg</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token function">loggingIdentity</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment">// index.ts(10,17): error TS2345: Argument of type &#x27;7&#x27; is not assignable to parameter of type &#x27;Lengthwise&#x27;.</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><p>多个类型参数之间也可以互相约束：</p><div class="__dumi-default-code-block"><pre class="prism-code language-ts"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="function copyFields&lt;T extends U, U&gt;(target: T, source: U): T {
  for (let id in source) {
    target[id] = (&lt;T&gt;source)[id];
  }
  return target;
}

let x = { a: 1, b: 2, c: 3, d: 4 };

copyFields(x, { b: 10, d: 20 });
" data-status="copy"></button><div class="token-line"><span class="token keyword">function</span><span class="token plain"> copyFields</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token plain"> </span><span class="token keyword">extends</span><span class="token plain"> </span><span class="token class-name">U</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token constant">U</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token plain">target</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token constant">T</span><span class="token punctuation">,</span><span class="token plain"> source</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token constant">U</span><span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token constant">T</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">for</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token keyword">let</span><span class="token plain"> id </span><span class="token keyword">in</span><span class="token plain"> source</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    target</span><span class="token punctuation">[</span><span class="token plain">id</span><span class="token punctuation">]</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token plain">source</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token plain">id</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">return</span><span class="token plain"> target</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">let</span><span class="token plain"> x </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"> a</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token number">1</span><span class="token punctuation">,</span><span class="token plain"> b</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token number">2</span><span class="token punctuation">,</span><span class="token plain"> c</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token number">3</span><span class="token punctuation">,</span><span class="token plain"> d</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token number">4</span><span class="token plain"> </span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token function">copyFields</span><span class="token punctuation">(</span><span class="token plain">x</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"> b</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token number">10</span><span class="token punctuation">,</span><span class="token plain"> d</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token number">20</span><span class="token plain"> </span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><p>上例中，我们使用了两个类型参数，其中要求 T 继承 U，这样就保证了 U 上不会出现 T 中不存在的字段。</p><h2 id="泛型接口"><a aria-hidden="true" href="#泛型接口"><span class="icon icon-link"></span></a>泛型接口</h2><p><a href="/typescript-guidebook//syntax/advanced/functions#%E7%94%A8%E6%8E%A5%E5%8F%A3%E5%AE%9A%E4%B9%89%E5%87%BD%E6%95%B0%E7%9A%84%E5%BD%A2%E7%8A%B6">之前学习过</a>，可以使用接口的方式来定义一个函数需要符合的形状：</p><div class="__dumi-default-code-block"><pre class="prism-code language-ts"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="interface SearchFunc {
  (source: string, subString: string): boolean;
}

let mySearch: SearchFunc;
mySearch = function(source: string, subString: string) {
  return source.search(subString) !== -1;
};
" data-status="copy"></button><div class="token-line"><span class="token keyword">interface</span><span class="token plain"> </span><span class="token class-name">SearchFunc</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">(</span><span class="token plain">source</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation">,</span><span class="token plain"> subString</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token builtin">boolean</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">let</span><span class="token plain"> mySearch</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token maybe-class-name">SearchFunc</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token function-variable function">mySearch</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">source</span><span class="token parameter punctuation">:</span><span class="token parameter"> string</span><span class="token parameter punctuation">,</span><span class="token parameter"> subString</span><span class="token parameter punctuation">:</span><span class="token parameter"> string</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">return</span><span class="token plain"> source</span><span class="token punctuation">.</span><span class="token method function property-access">search</span><span class="token punctuation">(</span><span class="token plain">subString</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token operator">!==</span><span class="token plain"> </span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><p>当然也可以使用含有泛型的接口来定义函数的形状：</p><div class="__dumi-default-code-block"><pre class="prism-code language-ts"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="interface CreateArrayFunc {
  &lt;T&gt;(length: number, value: T): Array&lt;T&gt;;
}

let createArray: CreateArrayFunc;
createArray = function&lt;T&gt;(length: number, value: T): Array&lt;T&gt; {
  let result: T[] = [];
  for (let i = 0; i &lt; length; i++) {
    result[i] = value;
  }
  return result;
};

createArray(3, &#x27;x&#x27;); // [&#x27;x&#x27;, &#x27;x&#x27;, &#x27;x&#x27;]
" data-status="copy"></button><div class="token-line"><span class="token keyword">interface</span><span class="token plain"> </span><span class="token class-name">CreateArrayFunc</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token plain">length</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token punctuation">,</span><span class="token plain"> value</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token constant">T</span><span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token known-class-name class-name">Array</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">let</span><span class="token plain"> createArray</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token maybe-class-name">CreateArrayFunc</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token function-variable function">createArray</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword">function</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token plain">length</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token punctuation">,</span><span class="token plain"> value</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token constant">T</span><span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token known-class-name class-name">Array</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">let</span><span class="token plain"> result</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token constant">T</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">for</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token keyword">let</span><span class="token plain"> i </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation">;</span><span class="token plain"> i </span><span class="token operator">&lt;</span><span class="token plain"> length</span><span class="token punctuation">;</span><span class="token plain"> i</span><span class="token operator">++</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    result</span><span class="token punctuation">[</span><span class="token plain">i</span><span class="token punctuation">]</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> value</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">return</span><span class="token plain"> result</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token function">createArray</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">&#x27;x&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"> </span><span class="token comment">// [&#x27;x&#x27;, &#x27;x&#x27;, &#x27;x&#x27;]</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><p>进一步，我们可以把泛型参数提前到接口名上：</p><div class="__dumi-default-code-block"><pre class="prism-code language-ts"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="interface CreateArrayFunc&lt;T&gt; {
  (length: number, value: T): Array&lt;T&gt;;
}

let createArray: CreateArrayFunc&lt;any&gt;;
createArray = function&lt;T&gt;(length: number, value: T): Array&lt;T&gt; {
  let result: T[] = [];
  for (let i = 0; i &lt; length; i++) {
    result[i] = value;
  }
  return result;
};

createArray(3, &#x27;x&#x27;); // [&#x27;x&#x27;, &#x27;x&#x27;, &#x27;x&#x27;]
" data-status="copy"></button><div class="token-line"><span class="token keyword">interface</span><span class="token plain"> </span><span class="token class-name">CreateArrayFunc</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">(</span><span class="token plain">length</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token punctuation">,</span><span class="token plain"> value</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token constant">T</span><span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token known-class-name class-name">Array</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">let</span><span class="token plain"> createArray</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token maybe-class-name">CreateArrayFunc</span><span class="token operator">&lt;</span><span class="token builtin">any</span><span class="token operator">&gt;</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token function-variable function">createArray</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword">function</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token plain">length</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token punctuation">,</span><span class="token plain"> value</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token constant">T</span><span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token known-class-name class-name">Array</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">let</span><span class="token plain"> result</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token constant">T</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">for</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token keyword">let</span><span class="token plain"> i </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation">;</span><span class="token plain"> i </span><span class="token operator">&lt;</span><span class="token plain"> length</span><span class="token punctuation">;</span><span class="token plain"> i</span><span class="token operator">++</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    result</span><span class="token punctuation">[</span><span class="token plain">i</span><span class="token punctuation">]</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> value</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">return</span><span class="token plain"> result</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token function">createArray</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">&#x27;x&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"> </span><span class="token comment">// [&#x27;x&#x27;, &#x27;x&#x27;, &#x27;x&#x27;]</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><p>⚠️ 注意，此时在使用泛型接口的时候，需要定义泛型的类型。</p><h2 id="泛型类"><a aria-hidden="true" href="#泛型类"><span class="icon icon-link"></span></a>泛型类</h2><p>与泛型接口类似，泛型也可以用于类的类型定义中：</p><div class="__dumi-default-code-block"><pre class="prism-code language-ts"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="class GenericNumber&lt;T&gt; {
  zeroValue: T;
  add: (x: T, y: T) =&gt; T;
}

let myGenericNumber = new GenericNumber&lt;number&gt;();
myGenericNumber.zeroValue = 0;
myGenericNumber = add;
" data-status="copy"></button><div class="token-line"><span class="token keyword">class</span><span class="token plain"> </span><span class="token class-name">GenericNumber</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  zeroValue</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token constant">T</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token function-variable function">add</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token parameter punctuation">:</span><span class="token parameter"> T</span><span class="token parameter punctuation">,</span><span class="token parameter"> y</span><span class="token parameter punctuation">:</span><span class="token parameter"> T</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token constant">T</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">let</span><span class="token plain"> myGenericNumber </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword">new</span><span class="token plain"> </span><span class="token class-name">GenericNumber</span><span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">myGenericNumber</span><span class="token punctuation">.</span><span class="token property-access">zeroValue</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">myGenericNumber </span><span class="token operator">=</span><span class="token plain"> add</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h2 id="泛型参数的默认类型"><a aria-hidden="true" href="#泛型参数的默认类型"><span class="icon icon-link"></span></a>泛型参数的默认类型</h2><p>在 TypeScript 2.3 之后，我们可以为泛型中的类型参数指定类型。当使用泛型时没有代码中直接指定类型参数，从实际值参数中也无法推测出时，这个默认类型就会起起作用。</p><div class="__dumi-default-code-block"><pre class="prism-code language-ts"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="function createArray&lt;T = string&gt;(length: number, value: T): Array&lt;T&gt; {
  let result: T[] = [];
  for (let i = 0; i &lt; length; i++) {
    result[i] = value;
  }
  return result;
}
" data-status="copy"></button><div class="token-line"><span class="token keyword">function</span><span class="token plain"> createArray</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token plain">length</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token punctuation">,</span><span class="token plain"> value</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token constant">T</span><span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token known-class-name class-name">Array</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">let</span><span class="token plain"> result</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token constant">T</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">for</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token keyword">let</span><span class="token plain"> i </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation">;</span><span class="token plain"> i </span><span class="token operator">&lt;</span><span class="token plain"> length</span><span class="token punctuation">;</span><span class="token plain"> i</span><span class="token operator">++</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    result</span><span class="token punctuation">[</span><span class="token plain">i</span><span class="token punctuation">]</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> value</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">return</span><span class="token plain"> result</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div></div><div class="__dumi-default-layout-footer-meta"><a target="_blank" rel="noopener noreferrer" href="https://github.com/tsejx/typescript-guidebook/edit/master/docs/syntax/advanced/generics.md">Edit this doc on GitHub<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a><span data-updated-text="Last Update: ">8/25/2020, 2:53:55 AM</span></div></div></div></div>
	<script>
  window.g_useSSR = true;
  window.g_initialProps = {};
	</script>

    <script src="/typescript-guidebook/umi.js"></script>
    <script src="/typescript-guidebook/docs__syntax__advanced__generics.md.js"></script>
  </body>
</html>
