<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no"
    />
    <link rel="shortcut icon" type="image/x-icon" href="./favicon.ico" />
    <link rel="stylesheet" href="/typescript-guidebook/umi.css" />
    <script>
      window.routerBase = "/typescript-guidebook/";
    </script>
    <script>
      //! umi version: 3.2.16
    </script>
    <title>映射类型</title>
  
</head>
  <body>
    <div id="root"><div class="__dumi-default-layout" data-show-sidemenu="true" data-show-slugs="true" data-site-mode="true" data-gapless="false"><div class="__dumi-default-navbar" data-mode="site"><button class="__dumi-default-navbar-toggle"></button><a class="__dumi-default-navbar-logo" style="background-image:url(&#x27;http://img.mrsingsing.com/typescript-guidebook-logo.svg&#x27;)" href="/typescript-guidebook//">TypeScript Guidebook</a><nav><div class="__dumi-default-search"><input type="search" class="__dumi-default-search-input" value=""/><ul></ul></div><a aria-current="page" class="active" href="/typescript-guidebook//syntax">语法</a><a href="/typescript-guidebook//config">配置</a><a href="/typescript-guidebook//compiler">编译原理</a><a href="/typescript-guidebook//wiki">扩展</a><a target="_blank" rel="noopener noreferrer" href="https://github.com/tsejx/typescript-guidebook">Github<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div><div class="__dumi-default-menu" data-mode="site"><div class="__dumi-default-menu-inner"><div class="__dumi-default-menu-header"><a class="__dumi-default-menu-logo" style="background-image:url(&#x27;http://img.mrsingsing.com/typescript-guidebook-logo.svg&#x27;)" href="/typescript-guidebook//"></a><h1>TypeScript Guidebook</h1><p>TypeScript 完全知识体系</p></div><div class="__dumi-default-menu-mobile-area"><ul class="__dumi-default-menu-nav-list"><li><a aria-current="page" class="active" href="/typescript-guidebook//syntax">语法</a></li><li><a href="/typescript-guidebook//config">配置</a></li><li><a href="/typescript-guidebook//compiler">编译原理</a></li><li><a href="/typescript-guidebook//wiki">扩展</a></li><li><a target="_blank" rel="noopener noreferrer" href="https://github.com/tsejx/typescript-guidebook">Github<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div><ul class="__dumi-default-menu-list"><li><a href="/typescript-guidebook//syntax/basics">基础</a><ul><li><a href="/typescript-guidebook//syntax/basics/basic-types"><span>原始数据类型</span></a></li><li><a href="/typescript-guidebook//syntax/basics/tuple"><span>元组类型</span></a></li><li><a href="/typescript-guidebook//syntax/basics/enums"><span>枚举类型</span></a></li><li><a href="/typescript-guidebook//syntax/basics/any"><span>任意类型</span></a></li><li><a href="/typescript-guidebook//syntax/basics/type-of-never"><span>never 类型</span></a></li><li><a href="/typescript-guidebook//syntax/basics/type-of-array"><span>数组的类型</span></a></li><li><a href="/typescript-guidebook//syntax/basics/type-of-function"><span>函数的类型</span></a></li><li><a href="/typescript-guidebook//syntax/basics/interfaces"><span>对象的类型 / 接口</span></a></li><li><a href="/typescript-guidebook//syntax/basics/classes"><span>类</span></a></li><li><a href="/typescript-guidebook//syntax/basics/type-aliases"><span>类型别名</span></a></li><li><a href="/typescript-guidebook//syntax/basics/declaration-merging"><span>声明合并</span></a></li></ul></li><li><a aria-current="page" class="active" href="/typescript-guidebook//syntax/advanced">进阶</a><ul><li><a href="/typescript-guidebook//syntax/advanced/generics"><span>泛型</span></a></li><li><a href="/typescript-guidebook//syntax/advanced/type-assertion"><span>类型断言</span></a></li><li><a href="/typescript-guidebook//syntax/advanced/type-inference"><span>类型推论</span></a></li><li><a href="/typescript-guidebook//syntax/advanced/type-guards"><span>类型保护</span></a></li><li><a href="/typescript-guidebook//syntax/advanced/type-compatibility"><span>类型兼容性</span></a></li><li><a href="/typescript-guidebook//syntax/advanced/intersection-types"><span>交叉类型</span></a></li><li><a href="/typescript-guidebook//syntax/advanced/union-types"><span>联合类型</span></a></li><li><a href="/typescript-guidebook//syntax/advanced/index-types"><span>索引类型</span></a></li><li><a aria-current="page" class="active" href="/typescript-guidebook//syntax/advanced/mapped-types"><span>映射类型</span></a></li><li><a href="/typescript-guidebook//syntax/advanced/conditional-types"><span>条件类型</span></a></li><li><a href="/typescript-guidebook//syntax/advanced/this-types"><span>This类型</span></a></li><li><a href="/typescript-guidebook//syntax/advanced/string-literal-types"><span>字符串字面量类型</span></a></li><li><a href="/typescript-guidebook//syntax/advanced/discriminated-unions"><span>可辨识联合</span></a></li><li><a href="/typescript-guidebook//syntax/advanced/namespaces-and-modules"><span>命名空间和模块</span></a></li><li><a href="/typescript-guidebook//syntax/advanced/utility-types"><span>实用工具类型</span></a></li></ul></li><li><a href="/typescript-guidebook//syntax/senior">高级</a><ul><li><a href="/typescript-guidebook//syntax/senior/modules-resolution"><span>模块解析</span></a></li><li><a href="/typescript-guidebook//syntax/senior/decorators"><span>装饰器</span></a></li><li><a href="/typescript-guidebook//syntax/senior/mixins"><span>混入</span></a></li><li><a href="/typescript-guidebook//syntax/senior/triple-slash-directives"><span>三斜线指令</span></a></li><li><a href="/typescript-guidebook//syntax/senior/error"><span>常见报错</span></a></li></ul></li></ul></div></div><ul class="__dumi-default-layout-toc" role="slug-list"><li title="其他映射类型转化案例" data-depth="2" class=""><a href="/typescript-guidebook//syntax/advanced/mapped-types#其他映射类型转化案例"><span>其他映射类型转化案例</span></a></li><li title="由映射类型进行推断" data-depth="2" class=""><a href="/typescript-guidebook//syntax/advanced/mapped-types#由映射类型进行推断"><span>由映射类型进行推断</span></a></li></ul><div class="__dumi-default-layout-content"><div class="markdown"><h1 id="映射类型"><a aria-hidden="true" href="#映射类型"><span class="icon icon-link"></span></a>映射类型</h1><p>映射类型（Mapped Types）可以基于旧类型创建新类型。</p><p>常见使用场景：</p><ul><li>将现有类型转换为可选的</li><li>将现有类型转换为只读的</li></ul><p>在实际应用中，可能需要将现有类型转换为可选的。</p><p>🌰 <strong>示例：</strong></p><div class="__dumi-default-code-block"><pre class="prism-code language-ts"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="interface Person {
  name: string;
  age: number;
  address: string;
}
" data-status="copy"></button><div class="token-line"><span class="token keyword">interface</span><span class="token plain"> </span><span class="token class-name">Person</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  name</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  age</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  address</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><p>将上述代码接口类型中的属性转换为可选。</p><div class="__dumi-default-code-block"><pre class="prism-code language-ts"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="interface PartialPerson {
  name?: string;
  age?: number;
  address?: string;
}
" data-status="copy"></button><div class="token-line"><span class="token keyword">interface</span><span class="token plain"> </span><span class="token class-name">PartialPerson</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  name</span><span class="token operator">?</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  age</span><span class="token operator">?</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  address</span><span class="token operator">?</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><p>映射类型转换可以使用如下方式：</p><div class="__dumi-default-code-block"><pre class="prism-code language-ts"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="// 将原有类型所有属性转为可选的
type Partial&lt;T&gt; = {
  [P in keyof T]?: T[P];
};

type PartialPerson = Partial&lt;Person&gt;;

// 将原有类型所有属性转为只读的
type Readonly&lt;T&gt; = {
  readonly [P in keyof T]: T[P];
};
" data-status="copy"></button><div class="token-line"><span class="token comment">// 将原有类型所有属性转为可选的</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">type</span><span class="token plain"> </span><span class="token maybe-class-name">Partial</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">[</span><span class="token constant">P</span><span class="token plain"> </span><span class="token keyword">in</span><span class="token plain"> </span><span class="token keyword">keyof</span><span class="token plain"> </span><span class="token constant">T</span><span class="token punctuation">]</span><span class="token operator">?</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">P</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">type</span><span class="token plain"> </span><span class="token maybe-class-name">PartialPerson</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token maybe-class-name">Partial</span><span class="token operator">&lt;</span><span class="token maybe-class-name">Person</span><span class="token operator">&gt;</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment">// 将原有类型所有属性转为只读的</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">type</span><span class="token plain"> </span><span class="token maybe-class-name">Readonly</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">readonly</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token constant">P</span><span class="token plain"> </span><span class="token keyword">in</span><span class="token plain"> </span><span class="token keyword">keyof</span><span class="token plain"> </span><span class="token constant">T</span><span class="token punctuation">]</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">P</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><p><code>[P in keyof T]</code>：类型变量 <code>K</code> 会把字符串字面量联合类型 <code>T</code> 的每个字符串都映射为属性。</p><p>当然，由于 <code>Partial&lt;T&gt;</code> 和 <code>Readonly&lt;T&gt;</code> 实用性强，它们与 <code>Pick</code> 和 <code>Record</code> 共同被包含进了 TypeScript 的标准库中。</p><div class="__dumi-default-code-block"><pre class="prism-code language-ts"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="type Pick&lt;T, K extends keyof T&gt; = {
  [P in K]: T[P];
};

type Record&lt;K extends string, T&gt; = {
  [P in K]: T;
};
" data-status="copy"></button><div class="token-line"><span class="token keyword">type</span><span class="token plain"> </span><span class="token maybe-class-name">Pick</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token constant">K</span><span class="token plain"> </span><span class="token keyword">extends</span><span class="token plain"> </span><span class="token class-name">keyof</span><span class="token plain"> </span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">[</span><span class="token constant">P</span><span class="token plain"> </span><span class="token keyword">in</span><span class="token plain"> </span><span class="token constant">K</span><span class="token punctuation">]</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">P</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">type</span><span class="token plain"> </span><span class="token maybe-class-name">Record</span><span class="token operator">&lt;</span><span class="token constant">K</span><span class="token plain"> </span><span class="token keyword">extends</span><span class="token plain"> </span><span class="token class-name">string</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">[</span><span class="token constant">P</span><span class="token plain"> </span><span class="token keyword">in</span><span class="token plain"> </span><span class="token constant">K</span><span class="token punctuation">]</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token constant">T</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><p><code>Readonly</code>，<code>Partial</code> 和 <code>Pick</code> 是同态的，但 <code>Record</code> 不是。 因为 <code>Record</code> 并不需要输入类型来拷贝属性，所以它不属于同态：</p><div class="__dumi-default-code-block"><pre class="prism-code language-ts"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="type ThreeStringProps = Record&lt;&#x27;prop1&#x27; | &#x27;prop2&#x27; | &#x27;prop3&#x27;, string&gt;;
" data-status="copy"></button><div class="token-line"><span class="token keyword">type</span><span class="token plain"> </span><span class="token maybe-class-name">ThreeStringProps</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token maybe-class-name">Record</span><span class="token operator">&lt;</span><span class="token string">&#x27;prop1&#x27;</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> </span><span class="token string">&#x27;prop2&#x27;</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> </span><span class="token string">&#x27;prop3&#x27;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token operator">&gt;</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><p>非同态类型本质上会创建新的属性，因此它们不会从它处拷贝属性修饰符。</p><h2 id="其他映射类型转化案例"><a aria-hidden="true" href="#其他映射类型转化案例"><span class="icon icon-link"></span></a>其他映射类型转化案例</h2><p>在真正的应用里，可能不同于上面的 Readonly 或 Partial。 它们会基于一些已存在的类型，且按照一定的方式转换字段。 这就是 <code>keyof</code> 和索引访问类型要做的事情：</p><div class="__dumi-default-code-block"><pre class="prism-code language-ts"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="type NullablePerson = {
    [P in keyof Person]: Person[P] | null,
}

type PartialPerson = {
    [P in keyof Person]?: Person[P]
}
" data-status="copy"></button><div class="token-line"><span class="token keyword">type</span><span class="token plain"> </span><span class="token maybe-class-name">NullablePerson</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">[</span><span class="token constant">P</span><span class="token plain"> </span><span class="token keyword">in</span><span class="token plain"> </span><span class="token keyword">keyof</span><span class="token plain"> </span><span class="token maybe-class-name">Person</span><span class="token punctuation">]</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token maybe-class-name">Person</span><span class="token punctuation">[</span><span class="token constant">P</span><span class="token punctuation">]</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> </span><span class="token keyword">null</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">type</span><span class="token plain"> </span><span class="token maybe-class-name">PartialPerson</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">[</span><span class="token constant">P</span><span class="token plain"> </span><span class="token keyword">in</span><span class="token plain"> </span><span class="token keyword">keyof</span><span class="token plain"> </span><span class="token maybe-class-name">Person</span><span class="token punctuation">]</span><span class="token operator">?</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token maybe-class-name">Person</span><span class="token punctuation">[</span><span class="token constant">P</span><span class="token punctuation">]</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><p>但它更有用的地方是可以有一些通用的版本。</p><div class="__dumi-default-code-block"><pre class="prism-code language-ts"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="type Nullable&lt;T&gt; = {
  [P in keyof Person]: T[P] | null;
};

type Partial&lt;T&gt; = {
  [P in keyof T]?: T[P];
};
" data-status="copy"></button><div class="token-line"><span class="token keyword">type</span><span class="token plain"> </span><span class="token maybe-class-name">Nullable</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">[</span><span class="token constant">P</span><span class="token plain"> </span><span class="token keyword">in</span><span class="token plain"> </span><span class="token keyword">keyof</span><span class="token plain"> </span><span class="token maybe-class-name">Person</span><span class="token punctuation">]</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">P</span><span class="token punctuation">]</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> </span><span class="token keyword">null</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">type</span><span class="token plain"> </span><span class="token maybe-class-name">Partial</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">[</span><span class="token constant">P</span><span class="token plain"> </span><span class="token keyword">in</span><span class="token plain"> </span><span class="token keyword">keyof</span><span class="token plain"> </span><span class="token constant">T</span><span class="token punctuation">]</span><span class="token operator">?</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">P</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><p>在这些例子中，属性列表是 <code>keyof T</code> 且结果类型是 <code>T[P]</code> 的变体。这是使用通用映射类型的一个好模版。因为这类转换是同态的，映射只作用于 <code>T</code> 的属性而没有其他的。编译器知道在添加任何新属性之前可以拷贝所以所存在的属性修饰符。例如，假设 <code>Person.name</code> 是只读的，那么 <code>Partial&lt;Person&gt;.name</code> 也将是只读的且为可选的。</p><h2 id="由映射类型进行推断"><a aria-hidden="true" href="#由映射类型进行推断"><span class="icon icon-link"></span></a>由映射类型进行推断</h2><p>现在你了解了如何包装一个类型的属性，那么接下来就是如何拆包。 其实这也非常容易：</p><div class="__dumi-default-code-block"><pre class="prism-code language-ts"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="function unproxify&lt;T&gt;(t: Proxify&lt;T&gt;): T {
  let result = {} as T;
  for (const k in t) {
    result[k] = t[k].get();
  }
  return result;
}

let originalProps = unproxify(proxyProps);
" data-status="copy"></button><div class="token-line"><span class="token keyword">function</span><span class="token plain"> unproxify</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token plain">t</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token maybe-class-name">Proxify</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token constant">T</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">let</span><span class="token plain"> result </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token plain"> </span><span class="token keyword">as</span><span class="token plain"> </span><span class="token constant">T</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">for</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token keyword">const</span><span class="token plain"> k </span><span class="token keyword">in</span><span class="token plain"> t</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    result</span><span class="token punctuation">[</span><span class="token plain">k</span><span class="token punctuation">]</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> t</span><span class="token punctuation">[</span><span class="token plain">k</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">return</span><span class="token plain"> result</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">let</span><span class="token plain"> originalProps </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function">unproxify</span><span class="token punctuation">(</span><span class="token plain">proxyProps</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><p>注意这个拆包推断只适用于<strong>同态</strong>的映射类型。 如果映射类型不是同态的，那么需要给拆包函数一个明确的类型参数。</p></div><div class="__dumi-default-layout-footer-meta"><a target="_blank" rel="noopener noreferrer" href="https://github.com/tsejx/typescript-guidebook/edit/master/docs/syntax/advanced/mapped-types.md">Edit this doc on GitHub<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a><span data-updated-text="Last Update: ">8/25/2020, 2:53:55 AM</span></div></div></div></div>
	<script>
  window.g_useSSR = true;
  window.g_initialProps = {};
	</script>

    <script src="/typescript-guidebook/umi.js"></script>
    <script src="/typescript-guidebook/docs__syntax__advanced__mapped-types.md.js"></script>
  </body>
</html>
