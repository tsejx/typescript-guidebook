<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no"
    />
    <link rel="shortcut icon" type="image/x-icon" href="./favicon.ico" />
    <link rel="stylesheet" href="/typescript-guidebook/umi.css" />
    <script>
      window.routerBase = "/typescript-guidebook/";
    </script>
    <script>
      //! umi version: 3.2.14
    </script>
    <title>&#x5B9E;&#x7528;&#x5DE5;&#x5177;&#x7C7B;&#x578B;</title>
  
</head>
  <body>
    <div id="root"><div class="__dumi-default-layout" data-show-sidemenu="true" data-show-slugs="true" data-site-mode="true" data-gapless="false"><div class="__dumi-default-navbar" data-mode="site"><button class="__dumi-default-navbar-toggle"></button><a class="__dumi-default-navbar-logo" style="background-image:url(&#x27;http://img.mrsingsing.com/typescript-guidebook-logo.svg&#x27;)" href="/typescript-guidebook//">TypeScript Guidebook</a><nav><div class="__dumi-default-search"><input type="search" class="__dumi-default-search-input" value=""/><ul></ul></div><a aria-current="page" class="active" href="/typescript-guidebook//syntax">语法</a><a href="/typescript-guidebook//config">配置</a><a target="_blank" rel="noopener noreferrer" href="https://github.com/tsejx/typescript-guidebook">Github<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div><div class="__dumi-default-menu" data-mode="site"><div class="__dumi-default-menu-inner"><div class="__dumi-default-menu-header"><a class="__dumi-default-menu-logo" style="background-image:url(&#x27;http://img.mrsingsing.com/typescript-guidebook-logo.svg&#x27;)" href="/typescript-guidebook//"></a><h1>TypeScript Guidebook</h1><p>TypeScript 完全知识体系</p></div><div class="__dumi-default-menu-mobile-area"><ul class="__dumi-default-menu-nav-list"><li><a aria-current="page" class="active" href="/typescript-guidebook//syntax">语法</a></li><li><a href="/typescript-guidebook//config">配置</a></li><li><a target="_blank" rel="noopener noreferrer" href="https://github.com/tsejx/typescript-guidebook">Github<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div><ul class="__dumi-default-menu-list"><li><a href="/typescript-guidebook//syntax/basics">基础</a><ul><li><a href="/typescript-guidebook//syntax/basics/basic-types"><span>原始数据类型</span></a></li><li><a href="/typescript-guidebook//syntax/basics/tuple"><span>元组类型</span></a></li><li><a href="/typescript-guidebook//syntax/basics/enums"><span>枚举类型</span></a></li><li><a href="/typescript-guidebook//syntax/basics/any"><span>任意类型</span></a></li><li><a href="/typescript-guidebook//syntax/basics/type-of-never"><span>Never 类型</span></a></li><li><a href="/typescript-guidebook//syntax/basics/type-of-array"><span>数组的类型</span></a></li><li><a href="/typescript-guidebook//syntax/basics/type-of-function"><span>函数的类型</span></a></li><li><a href="/typescript-guidebook//syntax/basics/interfaces"><span>接口</span></a></li><li><a href="/typescript-guidebook//syntax/basics/classes"><span>类</span></a></li><li><a href="/typescript-guidebook//syntax/basics/type-aliases"><span>类型别名</span></a></li><li><a href="/typescript-guidebook//syntax/basics/declaration-merging"><span>声明合并</span></a></li></ul></li><li><a aria-current="page" class="active" href="/typescript-guidebook//syntax/advanced">进阶</a><ul><li><a href="/typescript-guidebook//syntax/advanced/generics"><span>泛型</span></a></li><li><a href="/typescript-guidebook//syntax/advanced/type-assertion"><span>类型断言</span></a></li><li><a href="/typescript-guidebook//syntax/advanced/type-inference"><span>类型推论</span></a></li><li><a href="/typescript-guidebook//syntax/advanced/type-guards"><span>类型保护</span></a></li><li><a href="/typescript-guidebook//syntax/advanced/type-compatibility"><span>类型兼容性</span></a></li><li><a href="/typescript-guidebook//syntax/advanced/intersection-types"><span>交叉类型</span></a></li><li><a href="/typescript-guidebook//syntax/advanced/union-types"><span>联合类型</span></a></li><li><a href="/typescript-guidebook//syntax/advanced/index-types"><span>索引类型</span></a></li><li><a href="/typescript-guidebook//syntax/advanced/mapped-types"><span>映射类型</span></a></li><li><a href="/typescript-guidebook//syntax/advanced/conditional-types"><span>条件类型</span></a></li><li><a href="/typescript-guidebook//syntax/advanced/this-types"><span>This类型</span></a></li><li><a href="/typescript-guidebook//syntax/advanced/string-literal-types"><span>字符串字面量类型</span></a></li><li><a href="/typescript-guidebook//syntax/advanced/discriminated-unions"><span>可辨识联合</span></a></li><li><a href="/typescript-guidebook//syntax/advanced/namespaces-and-modules"><span>命名空间和模块</span></a></li><li><a aria-current="page" class="active" href="/typescript-guidebook//syntax/advanced/utility-types"><span>实用工具类型</span></a></li></ul></li></ul></div></div><ul class="__dumi-default-layout-toc" role="slug-list"><li title="Partial" data-depth="2" class=""><a href="/typescript-guidebook//syntax/advanced/utility-types#partial"><span>Partial</span></a></li><li title="Readonly" data-depth="2" class=""><a href="/typescript-guidebook//syntax/advanced/utility-types#readonly"><span>Readonly</span></a></li><li title="Record" data-depth="2" class=""><a href="/typescript-guidebook//syntax/advanced/utility-types#record"><span>Record</span></a></li><li title="Pick" data-depth="2" class=""><a href="/typescript-guidebook//syntax/advanced/utility-types#pick"><span>Pick</span></a></li><li title="Exclude" data-depth="2" class=""><a href="/typescript-guidebook//syntax/advanced/utility-types#exclude"><span>Exclude</span></a></li><li title="Extract" data-depth="2" class=""><a href="/typescript-guidebook//syntax/advanced/utility-types#extract"><span>Extract</span></a></li><li title="NonNullable" data-depth="2" class=""><a href="/typescript-guidebook//syntax/advanced/utility-types#nonnullable"><span>NonNullable</span></a></li><li title="ReturnType" data-depth="2" class=""><a href="/typescript-guidebook//syntax/advanced/utility-types#returntype"><span>ReturnType</span></a></li><li title="InstanceType" data-depth="2" class=""><a href="/typescript-guidebook//syntax/advanced/utility-types#instancetype"><span>InstanceType</span></a></li><li title="Required" data-depth="2" class=""><a href="/typescript-guidebook//syntax/advanced/utility-types#required"><span>Required</span></a></li><li title="ThisType" data-depth="2" class=""><a href="/typescript-guidebook//syntax/advanced/utility-types#thistype"><span>ThisType</span></a></li></ul><div class="__dumi-default-layout-content"><div class="markdown"><h1 id="实用工具类型"><a aria-hidden="true" href="#实用工具类型"><span class="icon icon-link"></span></a>实用工具类型</h1><h2 id="partial"><a aria-hidden="true" href="#partial"><span class="icon icon-link"></span></a>Partial</h2><p><code>Partial&lt;T&gt;</code> 构造类型 <code>T</code>，并将它所有的属性设置为可选的。它的返回类型表示输入类型的所有子类型。</p><div class="__dumi-default-code-block"><pre class="prism-code language-ts"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="interface Todo {
  title: string;
  description: string;
}

function updateTodo(todo: Todo, fieldsToUpdate: Partial&lt;Todo&gt;) {
  return { ...todo, ...fieldsToUpdate };
}

const todo1 = {
  title: &#x27;organize desk&#x27;,
  description: &#x27;clear clutter&#x27;,
};

const todo2 = {
  description: &#x27;throw out trash&#x27;,
};
" data-status="copy"></button><div class="token-line"><span class="token keyword">interface</span><span class="token plain"> </span><span class="token class-name">Todo</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  title</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  description</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">function</span><span class="token plain"> </span><span class="token function">updateTodo</span><span class="token punctuation">(</span><span class="token parameter">todo</span><span class="token parameter punctuation">:</span><span class="token parameter"> Todo</span><span class="token parameter punctuation">,</span><span class="token parameter"> fieldsToUpdate</span><span class="token parameter punctuation">:</span><span class="token parameter"> Partial</span><span class="token parameter operator">&lt;</span><span class="token parameter">Todo</span><span class="token parameter operator">&gt;</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">return</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"> </span><span class="token spread operator">...</span><span class="token plain">todo</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token spread operator">...</span><span class="token plain">fieldsToUpdate </span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">const</span><span class="token plain"> todo1 </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  title</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token string">&#x27;organize desk&#x27;</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  description</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token string">&#x27;clear clutter&#x27;</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">const</span><span class="token plain"> todo2 </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  description</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token string">&#x27;throw out trash&#x27;</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h2 id="readonly"><a aria-hidden="true" href="#readonly"><span class="icon icon-link"></span></a>Readonly</h2><p><code>Readonly&lt;T&gt;</code> 构造函数 <code>T</code>，并将它所有的属性设置为 <code>readonly</code>，也就是说构造出的类型的属性不能被再次赋值。</p><div class="__dumi-default-code-block"><pre class="prism-code language-ts"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="interface Todo {
  title: string;
}

const todo: Readonly&lt;Todo&gt; = {
  title: &#x27;Delete inactive users&#x27;,
};

todo.title = &#x27;Hello&#x27;;
// Error: cannot reassign a readonly property
" data-status="copy"></button><div class="token-line"><span class="token keyword">interface</span><span class="token plain"> </span><span class="token class-name">Todo</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  title</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">const</span><span class="token plain"> todo</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token maybe-class-name">Readonly</span><span class="token operator">&lt;</span><span class="token maybe-class-name">Todo</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  title</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token string">&#x27;Delete inactive users&#x27;</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain">todo</span><span class="token punctuation">.</span><span class="token property-access">title</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string">&#x27;Hello&#x27;</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment">// Error: cannot reassign a readonly property</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><p>这个工具可用来表示在运行时会失败的赋值表达式（比如，当尝试给冻结对象的属性再次赋值时）。</p><div class="__dumi-default-code-block"><pre class="prism-code language-ts"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="function freeze&lt;T&gt;(obj: T): Readonly&lt;T&gt;;
" data-status="copy"></button><div class="token-line"><span class="token keyword">function</span><span class="token plain"> freeze</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token plain">obj</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token constant">T</span><span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token maybe-class-name">Readonly</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h2 id="record"><a aria-hidden="true" href="#record"><span class="icon icon-link"></span></a>Record</h2><p><code>Record&lt;K, T&gt;</code> 构造一个类型，其属性名的类型为 <code>K</code>，属性值的类型为 <code>T</code>。这个工具可用来将某个类型的属性映射到另一个类型上。</p><div class="__dumi-default-code-block"><pre class="prism-code language-ts"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="interface PageInfo {
  title: string;
}

type Page = &#x27;home&#x27; | &#x27;about&#x27; | &#x27;contact&#x27;;

const x: Record&lt;Page, PageInfo&gt; = {
  about: { title: &#x27;about&#x27; },
  contact: { title: &#x27;contact&#x27; },
  home: { title: &#x27;home&#x27; },
};
" data-status="copy"></button><div class="token-line"><span class="token keyword">interface</span><span class="token plain"> </span><span class="token class-name">PageInfo</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  title</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">type</span><span class="token plain"> </span><span class="token maybe-class-name">Page</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string">&#x27;home&#x27;</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> </span><span class="token string">&#x27;about&#x27;</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> </span><span class="token string">&#x27;contact&#x27;</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">const</span><span class="token plain"> x</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token maybe-class-name">Record</span><span class="token operator">&lt;</span><span class="token maybe-class-name">Page</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token maybe-class-name">PageInfo</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  about</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"> title</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token string">&#x27;about&#x27;</span><span class="token plain"> </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  contact</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"> title</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token string">&#x27;contact&#x27;</span><span class="token plain"> </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  home</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"> title</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token string">&#x27;home&#x27;</span><span class="token plain"> </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h2 id="pick"><a aria-hidden="true" href="#pick"><span class="icon icon-link"></span></a>Pick</h2><p><code>Pick&lt;T, K&gt;</code> 从类型 <code>T</code> 中挑选部分属性 <code>K</code> 来构造类型。</p><div class="__dumi-default-code-block"><pre class="prism-code language-ts"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="interface Todo {
  title: string;
  description: string;
  completed: boolean;
}

type TodoPreview = Pick&lt;Todo, &#x27;title&#x27; | &#x27;completed&#x27;&gt;;

const todo: TodoPreview = {
  title: &#x27;Clean Room&#x27;,
  completed: false,
};
" data-status="copy"></button><div class="token-line"><span class="token keyword">interface</span><span class="token plain"> </span><span class="token class-name">Todo</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  title</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  description</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  completed</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token builtin">boolean</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">type</span><span class="token plain"> </span><span class="token maybe-class-name">TodoPreview</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token maybe-class-name">Pick</span><span class="token operator">&lt;</span><span class="token maybe-class-name">Todo</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">&#x27;title&#x27;</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> </span><span class="token string">&#x27;completed&#x27;</span><span class="token operator">&gt;</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">const</span><span class="token plain"> todo</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token maybe-class-name">TodoPreview</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  title</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token string">&#x27;Clean Room&#x27;</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  completed</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h2 id="exclude"><a aria-hidden="true" href="#exclude"><span class="icon icon-link"></span></a>Exclude</h2><p><code>Exclude&lt;T, U</code> 从类型 <code>T</code> 中剔除所有可以赋值给 <code>U</code> 的属性，然后构造一个类型。</p><div class="__dumi-default-code-block"><pre class="prism-code language-ts"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="type T0 = Exclude&lt;&#x27;a&#x27; | &#x27;b&#x27; | &#x27;c&#x27;, &#x27;a&#x27;&gt;; // &quot;b&quot; | &quot;c&quot;
type T1 = Exclude&lt;&#x27;a&#x27; | &#x27;b&#x27; | &#x27;c&#x27;, &#x27;a&#x27; | &#x27;b&#x27;&gt;; // &quot;c&quot;
type T2 = Exclude&lt;string | number | (() =&gt; void), Function&gt;; // string | number
" data-status="copy"></button><div class="token-line"><span class="token keyword">type</span><span class="token plain"> </span><span class="token constant">T0</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token maybe-class-name">Exclude</span><span class="token operator">&lt;</span><span class="token string">&#x27;a&#x27;</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> </span><span class="token string">&#x27;b&#x27;</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> </span><span class="token string">&#x27;c&#x27;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">&#x27;a&#x27;</span><span class="token operator">&gt;</span><span class="token punctuation">;</span><span class="token plain"> </span><span class="token comment">// &quot;b&quot; | &quot;c&quot;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">type</span><span class="token plain"> </span><span class="token constant">T1</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token maybe-class-name">Exclude</span><span class="token operator">&lt;</span><span class="token string">&#x27;a&#x27;</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> </span><span class="token string">&#x27;b&#x27;</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> </span><span class="token string">&#x27;c&#x27;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">&#x27;a&#x27;</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> </span><span class="token string">&#x27;b&#x27;</span><span class="token operator">&gt;</span><span class="token punctuation">;</span><span class="token plain"> </span><span class="token comment">// &quot;c&quot;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">type</span><span class="token plain"> </span><span class="token constant">T2</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token maybe-class-name">Exclude</span><span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token known-class-name class-name">Function</span><span class="token operator">&gt;</span><span class="token punctuation">;</span><span class="token plain"> </span><span class="token comment">// string | number</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h2 id="extract"><a aria-hidden="true" href="#extract"><span class="icon icon-link"></span></a>Extract</h2><p><code>Extract&lt;T, U&gt;</code> 从类型 <code>T</code> 中提取所有可以赋值给 <code>U</code> 的类型，然后构造一个类型。</p><div class="__dumi-default-code-block"><pre class="prism-code language-ts"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="type T0 = Extract&lt;&#x27;a&#x27; | &#x27;b&#x27; | &#x27;c&#x27;, &#x27;a&#x27; | &#x27;f&#x27;&gt;; // &quot;a&quot;
type T1 = Extract&lt;string | number | (() =&gt; void), Function&gt;; // () =&gt; void
" data-status="copy"></button><div class="token-line"><span class="token keyword">type</span><span class="token plain"> </span><span class="token constant">T0</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token maybe-class-name">Extract</span><span class="token operator">&lt;</span><span class="token string">&#x27;a&#x27;</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> </span><span class="token string">&#x27;b&#x27;</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> </span><span class="token string">&#x27;c&#x27;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">&#x27;a&#x27;</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> </span><span class="token string">&#x27;f&#x27;</span><span class="token operator">&gt;</span><span class="token punctuation">;</span><span class="token plain"> </span><span class="token comment">// &quot;a&quot;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">type</span><span class="token plain"> </span><span class="token constant">T1</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token maybe-class-name">Extract</span><span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token keyword">void</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token known-class-name class-name">Function</span><span class="token operator">&gt;</span><span class="token punctuation">;</span><span class="token plain"> </span><span class="token comment">// () =&gt; void</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h2 id="nonnullable"><a aria-hidden="true" href="#nonnullable"><span class="icon icon-link"></span></a>NonNullable</h2><p><code>NonNullable&lt;T&gt;</code> 从类型 <code>T</code> 中剔除 <code>null</code> 和 <code>undefined</code>，然后构造一个类型。</p><div class="__dumi-default-code-block"><pre class="prism-code language-ts"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="type T0 = NonNullable&lt;string | number | undefined&gt;; // string | number
type T1 = NonNullable&lt;string[] | null | undefined&gt;; // string[]
" data-status="copy"></button><div class="token-line"><span class="token keyword">type</span><span class="token plain"> </span><span class="token constant">T0</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token maybe-class-name">NonNullable</span><span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> undefined</span><span class="token operator">&gt;</span><span class="token punctuation">;</span><span class="token plain"> </span><span class="token comment">// string | number</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">type</span><span class="token plain"> </span><span class="token constant">T1</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token maybe-class-name">NonNullable</span><span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> </span><span class="token keyword">null</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> undefined</span><span class="token operator">&gt;</span><span class="token punctuation">;</span><span class="token plain"> </span><span class="token comment">// string[]</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h2 id="returntype"><a aria-hidden="true" href="#returntype"><span class="icon icon-link"></span></a>ReturnType</h2><p><code>ReturnType&lt;T&gt;</code> 由函数类型 <code>T</code> 的返回值类型构造一个类型。</p><div class="__dumi-default-code-block"><pre class="prism-code language-ts"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="type T0 = ReturnType&lt;() =&gt; string&gt;; // string
type T1 = ReturnType&lt;(s: string) =&gt; void&gt;; // void
type T2 = ReturnType&lt;&lt;T&gt;() =&gt; T&gt;; // {}
type T3 = ReturnType&lt;&lt;T extends U, U extends number[]&gt;() =&gt; T&gt;; // number[]
type T4 = ReturnType&lt;typeof f1&gt;; // { a: number, b: string }
type T5 = ReturnType&lt;any&gt;; // any
type T6 = ReturnType&lt;never&gt;; // any
type T7 = ReturnType&lt;string&gt;; // Error
type T8 = ReturnType&lt;Function&gt;; // Error
" data-status="copy"></button><div class="token-line"><span class="token keyword">type</span><span class="token plain"> </span><span class="token constant">T0</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token maybe-class-name">ReturnType</span><span class="token operator">&lt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token operator">&gt;</span><span class="token punctuation">;</span><span class="token plain"> </span><span class="token comment">// string</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">type</span><span class="token plain"> </span><span class="token constant">T1</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token maybe-class-name">ReturnType</span><span class="token operator">&lt;</span><span class="token punctuation">(</span><span class="token parameter">s</span><span class="token parameter punctuation">:</span><span class="token parameter"> string</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token keyword">void</span><span class="token operator">&gt;</span><span class="token punctuation">;</span><span class="token plain"> </span><span class="token comment">// void</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">type</span><span class="token plain"> </span><span class="token constant">T2</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token maybe-class-name">ReturnType</span><span class="token operator">&lt;&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">;</span><span class="token plain"> </span><span class="token comment">// {}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">type</span><span class="token plain"> </span><span class="token constant">T3</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token maybe-class-name">ReturnType</span><span class="token operator">&lt;&lt;</span><span class="token constant">T</span><span class="token plain"> </span><span class="token keyword">extends</span><span class="token plain"> </span><span class="token class-name">U</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token constant">U</span><span class="token plain"> </span><span class="token keyword">extends</span><span class="token plain"> </span><span class="token class-name">number</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">;</span><span class="token plain"> </span><span class="token comment">// number[]</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">type</span><span class="token plain"> </span><span class="token constant">T4</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token maybe-class-name">ReturnType</span><span class="token operator">&lt;</span><span class="token keyword">typeof</span><span class="token plain"> f1</span><span class="token operator">&gt;</span><span class="token punctuation">;</span><span class="token plain"> </span><span class="token comment">// { a: number, b: string }</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">type</span><span class="token plain"> </span><span class="token constant">T5</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token maybe-class-name">ReturnType</span><span class="token operator">&lt;</span><span class="token builtin">any</span><span class="token operator">&gt;</span><span class="token punctuation">;</span><span class="token plain"> </span><span class="token comment">// any</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">type</span><span class="token plain"> </span><span class="token constant">T6</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token maybe-class-name">ReturnType</span><span class="token operator">&lt;</span><span class="token builtin">never</span><span class="token operator">&gt;</span><span class="token punctuation">;</span><span class="token plain"> </span><span class="token comment">// any</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">type</span><span class="token plain"> </span><span class="token constant">T7</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token maybe-class-name">ReturnType</span><span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token operator">&gt;</span><span class="token punctuation">;</span><span class="token plain"> </span><span class="token comment">// Error</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">type</span><span class="token plain"> </span><span class="token constant">T8</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token maybe-class-name">ReturnType</span><span class="token operator">&lt;</span><span class="token known-class-name class-name">Function</span><span class="token operator">&gt;</span><span class="token punctuation">;</span><span class="token plain"> </span><span class="token comment">// Error</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h2 id="instancetype"><a aria-hidden="true" href="#instancetype"><span class="icon icon-link"></span></a>InstanceType</h2><p><code>InstanceType&lt;T&gt;</code> 由构造函数类型 <code>T</code> 的实例类型构造一个类型。</p><div class="__dumi-default-code-block"><pre class="prism-code language-ts"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="class C {
  x = 0;
  y = 0;
}

type T0 = InstanceType&lt;typeof C&gt;; // C
type T1 = InstanceType&lt;any&gt;; // any
type T2 = InstanceType&lt;never&gt;; // any
type T3 = InstanceType&lt;string&gt;; // Error
type T4 = InstanceType&lt;Function&gt;; // Error
" data-status="copy"></button><div class="token-line"><span class="token keyword">class</span><span class="token plain"> </span><span class="token class-name">C</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  x </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  y </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">type</span><span class="token plain"> </span><span class="token constant">T0</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token maybe-class-name">InstanceType</span><span class="token operator">&lt;</span><span class="token keyword">typeof</span><span class="token plain"> </span><span class="token constant">C</span><span class="token operator">&gt;</span><span class="token punctuation">;</span><span class="token plain"> </span><span class="token comment">// C</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">type</span><span class="token plain"> </span><span class="token constant">T1</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token maybe-class-name">InstanceType</span><span class="token operator">&lt;</span><span class="token builtin">any</span><span class="token operator">&gt;</span><span class="token punctuation">;</span><span class="token plain"> </span><span class="token comment">// any</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">type</span><span class="token plain"> </span><span class="token constant">T2</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token maybe-class-name">InstanceType</span><span class="token operator">&lt;</span><span class="token builtin">never</span><span class="token operator">&gt;</span><span class="token punctuation">;</span><span class="token plain"> </span><span class="token comment">// any</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">type</span><span class="token plain"> </span><span class="token constant">T3</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token maybe-class-name">InstanceType</span><span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token operator">&gt;</span><span class="token punctuation">;</span><span class="token plain"> </span><span class="token comment">// Error</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">type</span><span class="token plain"> </span><span class="token constant">T4</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token maybe-class-name">InstanceType</span><span class="token operator">&lt;</span><span class="token known-class-name class-name">Function</span><span class="token operator">&gt;</span><span class="token punctuation">;</span><span class="token plain"> </span><span class="token comment">// Error</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h2 id="required"><a aria-hidden="true" href="#required"><span class="icon icon-link"></span></a>Required</h2><p><code>Required&lt;T&gt;</code> 构造一个类型，使类型 <code>T</code> 的所有属性为 <code>required</code></p><div class="__dumi-default-code-block"><pre class="prism-code language-ts"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="interface Props {
  a?: number;
  b?: string;
}

const obj1: Props = { a: 5 };

const obj2: Required&lt;Props&gt; = { a: 5 };
// Error: property &#x27;b&#x27; missing
" data-status="copy"></button><div class="token-line"><span class="token keyword">interface</span><span class="token plain"> </span><span class="token class-name">Props</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  a</span><span class="token operator">?</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  b</span><span class="token operator">?</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">const</span><span class="token plain"> obj1</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token maybe-class-name">Props</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"> a</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token number">5</span><span class="token plain"> </span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">const</span><span class="token plain"> obj2</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token maybe-class-name">Required</span><span class="token operator">&lt;</span><span class="token maybe-class-name">Props</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"> a</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token number">5</span><span class="token plain"> </span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment">// Error: property &#x27;b&#x27; missing</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h2 id="thistype"><a aria-hidden="true" href="#thistype"><span class="icon icon-link"></span></a>ThisType</h2><p>这个工具不会返回一个转换后的类型。它做为上下文的 <code>this</code> 类型的一个标记。注意，若想使用此类型，必须启用 <code>--noImpliciThis</code>。</p><div class="__dumi-default-code-block"><pre class="prism-code language-ts"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="// Compile with --noImplicitThis

type ObjectDescription&lt;D, M&gt; = {
  data?: D,
  methods?: M &amp; ThisType&lt;D &amp; M&gt;;  // Type of &#x27;this&#x27; in methods is D &amp; M
}

function makeObj&lt;D, M&gt;(desc: ObjectDescriptor&lt;D, M&gt;): D &amp; M {
  let data: object = desc.data || {};
  let methods: object = desc.methods || {};
  return { ...data, ...methods } as D &amp; M;
}

let obj = makeObject({
  data: { x: 0, y: 0 },
  methods: {
    moveBy(dx: number, dy: number) {
      this.x += dx;   // Strongly typed this
      this.y += dy;   // Strongly typed this
    }
  }
});((

obj.x = 10;
obj.y = 20;
obj.moveBy(5, 5);
" data-status="copy"></button><div class="token-line"><span class="token comment">// Compile with --noImplicitThis</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">type</span><span class="token plain"> </span><span class="token maybe-class-name">ObjectDescription</span><span class="token operator">&lt;</span><span class="token constant">D</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token constant">M</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  data</span><span class="token operator">?</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token constant">D</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  methods</span><span class="token operator">?</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token constant">M</span><span class="token plain"> </span><span class="token operator">&amp;</span><span class="token plain"> </span><span class="token maybe-class-name">ThisType</span><span class="token operator">&lt;</span><span class="token constant">D</span><span class="token plain"> </span><span class="token operator">&amp;</span><span class="token plain"> </span><span class="token constant">M</span><span class="token operator">&gt;</span><span class="token punctuation">;</span><span class="token plain">  </span><span class="token comment">// Type of &#x27;this&#x27; in methods is D &amp; M</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">function</span><span class="token plain"> makeObj</span><span class="token operator">&lt;</span><span class="token constant">D</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token constant">M</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token plain">desc</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token maybe-class-name">ObjectDescriptor</span><span class="token operator">&lt;</span><span class="token constant">D</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token constant">M</span><span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token constant">D</span><span class="token plain"> </span><span class="token operator">&amp;</span><span class="token plain"> </span><span class="token constant">M</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">let</span><span class="token plain"> data</span><span class="token punctuation">:</span><span class="token plain"> object </span><span class="token operator">=</span><span class="token plain"> desc</span><span class="token punctuation">.</span><span class="token property-access">data</span><span class="token plain"> </span><span class="token operator">||</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">let</span><span class="token plain"> methods</span><span class="token punctuation">:</span><span class="token plain"> object </span><span class="token operator">=</span><span class="token plain"> desc</span><span class="token punctuation">.</span><span class="token property-access">methods</span><span class="token plain"> </span><span class="token operator">||</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">return</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"> </span><span class="token spread operator">...</span><span class="token plain">data</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token spread operator">...</span><span class="token plain">methods </span><span class="token punctuation">}</span><span class="token plain"> </span><span class="token keyword">as</span><span class="token plain"> </span><span class="token constant">D</span><span class="token plain"> </span><span class="token operator">&amp;</span><span class="token plain"> </span><span class="token constant">M</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">let</span><span class="token plain"> obj </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function">makeObject</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  data</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"> x</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation">,</span><span class="token plain"> y</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token number">0</span><span class="token plain"> </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  methods</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token function">moveBy</span><span class="token punctuation">(</span><span class="token parameter">dx</span><span class="token parameter punctuation">:</span><span class="token parameter"> number</span><span class="token parameter punctuation">,</span><span class="token parameter"> dy</span><span class="token parameter punctuation">:</span><span class="token parameter"> number</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">x</span><span class="token plain"> </span><span class="token operator">+=</span><span class="token plain"> dx</span><span class="token punctuation">;</span><span class="token plain">   </span><span class="token comment">// Strongly typed this</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">y</span><span class="token plain"> </span><span class="token operator">+=</span><span class="token plain"> dy</span><span class="token punctuation">;</span><span class="token plain">   </span><span class="token comment">// Strongly typed this</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain">obj</span><span class="token punctuation">.</span><span class="token property-access">x</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">10</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">obj</span><span class="token punctuation">.</span><span class="token property-access">y</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">20</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">obj</span><span class="token punctuation">.</span><span class="token method function property-access">moveBy</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><p>上面例子中，<code>makeObject</code> 参数里的 <code>methods</code> 对象具有一个上下文类型 <code>ThisType&lt;D &amp; M&gt;</code>，因此 <code>methods</code> 对象的方法里 <code>this</code> 的类型为 <code>{<!-- -->x: number, y: number<!-- -->}<!-- --> &amp; <!-- -->{<!-- --> moveBy(dx: number, dy: number): number<!-- -->}</code></p><p>在 <code>lib.d.ts</code> 里，<code>ThisType&lt;T&gt;</code> 标志性接口是个简单的空接口声明。除了在被识别对象子棉量的上下文类型之外，这个接口与一般的空接口没有什么不同。</p></div><div class="__dumi-default-layout-footer-meta"><a target="_blank" rel="noopener noreferrer" href="https://github.com/tsejx/typescript-guidebook/edit/master/docs/syntax/advanced/utility-types.md">Edit this doc on GitHub<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a><span data-updated-text="Last Update: ">8/10/2020, 1:37:20 PM</span></div></div></div></div>
	<script>
  window.g_useSSR = true;
  window.g_initialProps = {};
	</script>

    <script src="/typescript-guidebook/umi.js"></script>
    <script src="/typescript-guidebook/docs__syntax__advanced__utility-types.md.js"></script>
  </body>
</html>
